{"ast":null,"code":"var _jsxFileName = \"/Users/hemanthsukumar/Downloads/AdvSE/Team7_project/IMP/Ims_Frontend/src/Pages/LoginPage.js\",\n  _s = $RefreshSig$();\nimport { useDebugValue, useState, useEffect } from \"react\";\nimport Login from \"../Login\";\nimport { keyboard } from \"@testing-library/user-event/dist/keyboard\";\nimport UserPage from \"./UserPage\";\nimport { Link, useNavigate } from \"react-router-dom\";\n// import {setPage} from \"./App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction login(userid, password) {\n  const url = sessionStorage.getItem('url');\n  return fetch(url + '/login', {\n    method: \"post\",\n    headers: {\n      'content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      userId: userid,\n      password: password\n    })\n  }).then(data => data.json()).then(data => data.msg);\n}\nfunction LoginPage(props) {\n  _s();\n  const [userid, setUserid] = useState('');\n  const [password, setPassword] = useState('');\n  const [msg, setMsg] = useState('');\n  var name;\n  const navigate = useNavigate();\n  const handleSubmit = e => {\n    e.preventDefault();\n    setMsg('');\n    const response = login(userid, password);\n    response.then(d => {\n      if (d.includes('@')) {\n        [d, name] = d.split('@');\n        sessionStorage.setItem('name', name);\n      }\n      if (d === 'admin' || d === 'user') {\n        sessionStorage.setItem('userID', userid);\n        sessionStorage.setItem('login', true);\n        sessionStorage.setItem('role', d);\n        window.location.href = '/';\n      } else setMsg(d);\n    });\n  };\n  const handleChange = (e, change) => {\n    change(e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"main\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"login-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form-container login-container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          id: \"login-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 47\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"loginInput\",\n            placeholder: \"username\",\n            type: \"text\",\n            name: \"uname\",\n            onChange: e => handleChange(e, setUserid),\n            required: \"required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 177\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"loginInput\",\n            placeholder: \"password\",\n            type: \"password\",\n            name: \"password\",\n            onChange: e => handleChange(e, setPassword),\n            required: \"required\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 187\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 192\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"loginButton\",\n            type: \"submit\",\n            name: \"submit\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 107\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"msg\",\n            children: msg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/forgotPassword\",\n            children: \"Forgot Password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 12\n  }, this);\n}\n_s(LoginPage, \"JqGf/fbm/xVpNtRNEg7sUMRRxwo=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["useDebugValue","useState","useEffect","Login","keyboard","UserPage","Link","useNavigate","login","userid","password","url","sessionStorage","getItem","fetch","method","headers","body","JSON","stringify","userId","then","data","json","msg","LoginPage","props","setUserid","setPassword","setMsg","name","navigate","handleSubmit","e","preventDefault","response","d","includes","split","setItem","window","location","href","handleChange","change","target","value"],"sources":["/Users/hemanthsukumar/Downloads/AdvSE/Team7_project/IMP/Ims_Frontend/src/Pages/LoginPage.js"],"sourcesContent":["import { useDebugValue, useState, useEffect}  from \"react\";\r\nimport Login from \"../Login\";\r\nimport { keyboard } from \"@testing-library/user-event/dist/keyboard\";\r\nimport UserPage from \"./UserPage\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n// import {setPage} from \"./App\";\r\n\r\nfunction login(userid , password){\r\n\r\n    const url = sessionStorage.getItem('url');\r\n\r\n    return fetch(url + '/login',{\r\n        method : \"post\",\r\n        headers : { 'content-Type' : 'application/json'},\r\n        body: JSON.stringify({userId: userid, password: password})\r\n    }).then(data => data.json()).then(data => data.msg);\r\n\r\n}\r\n\r\nfunction LoginPage(props) {\r\n   \r\n    \r\n\r\n    const [userid,setUserid] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [msg,setMsg] = useState('');\r\n    var name;\r\n    \r\n    \r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = (e) => {\r\n\r\n        e.preventDefault();\r\n        setMsg('');\r\n        const response = login(userid, password);\r\n        response.then((d) => {\r\n\r\n            if(d.includes('@')){\r\n                [d,name] = d.split('@');\r\n                sessionStorage.setItem('name',name);\r\n            }\r\n\r\n            if(d === 'admin' || d === 'user') {\r\n\r\n                sessionStorage.setItem('userID',userid);\r\n                sessionStorage.setItem('login',true);\r\n                sessionStorage.setItem('role',d);\r\n                window.location.href = '/';\r\n                \r\n            }\r\n            else setMsg(d);\r\n        });\r\n        \r\n        \r\n    }\r\n\r\n    const handleChange = (e,change) => {\r\n        change(e.target.value);\r\n    }\r\n    \r\n    \r\n\r\n    \r\n  \r\n\r\n   \r\n\r\n    \r\n\r\n    return <div class=\"main\">\r\n        \r\n                            <div class=\"login-container\">\r\n                        <div class=\"form-container login-container\">\r\n                            <form onSubmit={handleSubmit} id=\"login-form\">\r\n                                <h2>Login</h2><br/>\r\n                                {/* <label>Username : </label> */}\r\n                                <input className=\"loginInput\" placeholder=\"username\" type=\"text\" name=\"uname\" onChange={(e) =>  handleChange(e,setUserid)} required='required'/><br/>\r\n                                {/* <label>Password : </label> */}\r\n                                <input className=\"loginInput\" placeholder=\"password\" type=\"password\" name = \"password\" onChange={(e) => handleChange(e,setPassword)} required='required'/><br/><br/>\r\n                                <button className=\"loginButton\" type=\"submit\" name=\"submit\">Login</button><br/>\r\n                                <div id=\"msg\">{msg}</div>\r\n                                <Link to = '/forgotPassword' >Forgot Password?</Link>\r\n                            </form>\r\n                            \r\n                        </div>\r\n                    </div>\r\n\r\n    </div>\r\n}\r\n\r\nexport default LoginPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}